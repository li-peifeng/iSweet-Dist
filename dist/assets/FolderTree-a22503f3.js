import{aP as k,a as y,h as t,I as W,S as d,C as s,ax as M,M as $,y as v,bl as X,z as x,A as O,B as I,D as B,m as h,ae as H,d4 as j,du as q,b0 as G,dv as K,_ as Q,dw as Y,x as _,r as Z,dx as p,an as f,aM as S,a7 as ee,N as te,ac as R,p as ne,a8 as re,H as oe,d as ae,dy as le,bi as ce}from"./index-8f978961.js";import{n as de,i as ue}from"./index-416f75fc.js";const T=le(),z=e=>{var o;const[l,n]=h("/");return(o=e.handle)==null||o.call(e,{setPath:n}),t(H,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(T.Provider,{get value(){return{value:l,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(P,{path:"/"})}})}})},P=e=>{const{isHidePath:l}=j(),[n,o]=h(),{value:r,onChange:u,forceRoot:a,autoOpen:D,showEmptyIcon:E,showHiddenFolder:V}=q(T),A=()=>{var c;return!!(E&&n()!==void 0&&!((c=n())!=null&&c.length))},[N,J]=G(()=>K(e.path,Q(),a));let C=!1;const w=async()=>{var F;if((F=n())!=null&&F.length)return;const c=await J();ce(c,U=>{C=!0,o(U)},()=>{i()&&g()})},{isOpen:i,onToggle:g}=k(),m=()=>r()===e.path,b=Y(e.path);_(Z(r,async c=>{D&&b(c)&&(i()||g(),C||w())}));const L=()=>l(e.path)&&!b(r());return t(d,{get when(){return V||!L()},get children(){return t(H,{get children(){return[t(M,{spacing:"$2",get children(){return[t(d,{get when(){return!N()},get fallback(){return t(p,{size:"sm",get color(){return f()}})},get children(){return t(d,{get when(){return!A()},get fallback(){return t(S,{get color(){return f()},as:de})},get children(){return t(S,{get color(){return f()},as:ue,get transform(){return i()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{g(),i()&&w()}})}})}}),t(ee,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return m()?"$info8":"transparent"},get _hover(){return{bgColor:m()?"$info8":te()}},onClick:()=>{u(e.path)},get children(){return R(()=>e.path==="/",!0)()?"root":ne(e.path)}})]}}),t(d,{get when(){return i()},get children(){return t(re,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(oe,{get each(){return n()},children:c=>t(P,{get path(){return ae(e.path,c.name)}})})}})}})]}})}})},ge=e=>{const l=y(),[n,o]=h(e.defaultValue??"/"),[r,u]=h();return _(()=>{var a;e.opened&&((a=r())==null||a.setPath(n()))}),t(B,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t($,{}),t(v,{get children(){return[t(x,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(O,{get children(){return[R(()=>e.children),t(z,{onChange:o,handle:a=>u(a),autoOpen:!0})]}}),t(I,{display:"flex",gap:"$2",get children(){return[t(d,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),t(s,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return l("global.cancel")}}),t(s,{get loading(){return e.loading},onClick:()=>{var a;return(a=e.onSubmit)==null?void 0:a.call(e,n())},get children(){return l("global.ok")}})]}})]}})]}})},fe=e=>{const{isOpen:l,onOpen:n,onClose:o}=k(),r=y();return[t(M,{w:"$full",spacing:"$2",get children(){return[t(W,{get id(){return e.id},get value(){return e.value},onInput:u=>e.onChange(u.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?n:()=>{}},get placeholder(){return r(`global.${e.onlyFolder?"choose_folder":"choose_or_input_path"}`)}}),t(d,{get when(){return!e.onlyFolder},get children(){return t(s,{onClick:n,get children(){return r("global.choose")}})}})]}}),t(B,{size:"xl",get opened(){return l()},onClose:o,get children(){return[t($,{}),t(v,{get children(){return[t(X,{}),t(x,{get children(){return r("global.choose_folder")}}),t(O,{get children(){return t(z,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(I,{get children(){return t(s,{onClick:o,get children(){return r("global.confirm")}})}})]}})]}})]};export{z as F,ge as M,fe as a};
